<html>
<head>
  <meta charset="UTF-8">
  <link href='https://fonts.googleapis.com/earlyaccess/notosanskr.css' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/base.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/header.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/footer.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/order/cart.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/ticket.css" type="text/css">
  <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
</head>
<body>
<header class="header"><!-- layout/header.html --></header>

<section class="main">
  <header class="main-header cart-header">
    <span>장바구니</span>
    <span class="cart-header-badge">2</span>
  </header>
  <div class="process">
    <span class="process-cart">장바구니</span>
    <span class="process-order">주문/결제</span>
    <span class="process-complete">주문완료</span>
  </div>
  <table>
    <thead>
    <td>
      <input id="checkbox-cart-item-all" class="checkbox-cart-item hidden" type="checkbox"/>
      <div id="cart-item-all" class="cart-item-all" onclick="toggle_checkbox_all();"></div>
    </td>
    <th style="min-width: 200px;">상품명</th>
    <th>옵션</th>
    <th>가격</th>
    <th>수량</th>
    <th>합계</th>
    <th>적립금</th>
    <th></th>
    </thead>
    <tbody>
      <tr id="row_0">
        <td>
          <input id="checkbox-cart-item-0" class="checkbox-cart-item hidden" type="checkbox"/>
          <div id="cart-item-0" class="cart-item" onclick="toggle_checkbox(0);"></div>
        </td>
        <td>
          <div class="ticket-order-daily-follower-up"></div>
          <div class="cart-item-title-text">
            <div class="cart-item-title-text-header">데일리 팔로워 업</div>
            <div class="cart-item-title-text-description">매일 150명씩 총 1,500명 증가</div>
          </div>
          <div class="clear"></div>
        </td>
        <td><div class="cart-item-option">1,500</div></td>
        <td class="cart-item-price">132,000원</td>
        <td>
          <a href="#!"><img src="../assets/images/arrow-left-grey.png"></a>
          <div class="cart-item-ammount">1개</div>
          <a href="#!"><img src="../assets/images/arrow-right-black.png"></a>
        </td>
        <td>132,000원</td>
        <td>
          <span class="mark-mileage">M</span>
          <span class="data-mileage">19,320원</span>
        </td>
        <td><img class="delete-row" src="../assets/images/icon-x-black.png" onclick="delete_row(0)"/></td>
      </tr>
      <tr id="row_1">
        <td>
          <input id="checkbox-cart-item-1" class="checkbox-cart-item hidden" type="checkbox"/>
          <div id="cart-item-1" class="cart-item" onclick="toggle_checkbox(1);"></div>
        </td>
        <td>
          <div class="ticket-order-like-up"></div>
          <div class="cart-item-title-text">
            <div class="cart-item-title-text-header">좋아요 업</div>
            <div class="cart-item-title-text-description">좋아요가 2,500개 증가</div>
          </div>
          <div class="clear"></div>
        </td>
        <td><div class="cart-item-option">1,500</div></td>
        <td class="cart-item-price">132,000원</td>
        <td>
          <a href="#!"><img src="../assets/images/arrow-left-grey.png"></a>
          <div class="cart-item-ammount">1개</div>
          <a href="#!"><img src="../assets/images/arrow-right-black.png"></a>
        </td>
        <td>132,000원</td>
        <td>
          <span class="mark-mileage">M</span>
          <span class="data-mileage">19,320원</span>
        </td>
        <td><img class="delete-row" src="../assets/images/icon-x-black.png" onclick="delete_row(1)"/></td>
      </tr>
    </tbody>
  </table>

  <div class="totla-price-promotion">
    <div class="total-price">
      <span class="total-price-label">상품금액</span>
      <span class="total-price-value">264,000원</span>
      <div class="clear"></div>
    </div>
    <div class="promotion">
      <span class="promotion-label">할인</span>
      <span class="promotion-name">진행중인 프로모션 명</span>
      <span class="promotion-value">
        - 0원
      </span>
      <div class="clear"></div>
    </div>
  </div>
  <div class="final">
    <div class="final-price">
      <span>합계</span>
      <span class="final-price-value">264,000원</span>
    </div>
    <div>
      <span>적립금</span>
      <span class="final-mileage-value">38,649원</span>
      <span class="final-mark-mileage">M</span>
    </div>
  </div>
  <div>
    <a href="#!" class="btn-continue">서비스 계속 보기</a>
    <div class="float-right">
      <a href="#!" class="btn-seleted-order">선택 상품 주문</a>
      <a href="#!" class="btn-all-order">전체 상품 주문</a>
    </div>
  </div>
  <div class="clear"></div>
</section>
<footer class="footer"><!-- layout/header.html --></footer>
</body>

<script>
  $('.header').load("../layout/header.html");
  $('.footer').load("../layout/footer.html");

  // 체크박스 전체를 토글하는 함수
  function toggle_checkbox_all() {
    checkbox_all = $('#checkbox-cart-item-all');
    checkbox_all.prop('checked', !checkbox_all.prop('checked'));
    $('.cart-item').each(function (index, item) {
      checkbox = $('#checkbox-cart-item-'+index)
      if(checkbox.prop('checked') != checkbox_all.prop('checked')) {
        item.click();
      }
    });
    $('#cart-item-all').toggleClass('cart-item-checked');
  }

  // 체크박스 이미지를 클릭하면 체크박스를 토글하는 함수
  function toggle_checkbox(index) {
    var checkbox = $('#checkbox-cart-item-'+index);
    checkbox.prop('checked', !checkbox.prop('checked'));
    $('#cart-item-'+index).toggleClass('cart-item-checked');
  }

  // 상품을 지우는 함수
  function delete_row(index) {
    if (confirm("장바구니에 해당 상품을 삭제합니다.")) {
      $('#row_'+index).remove();
    }
  }
</script>
</html>
